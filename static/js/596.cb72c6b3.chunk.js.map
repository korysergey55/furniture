{"version":3,"file":"static/js/596.cb72c6b3.chunk.js","mappings":"iJACA,QAAkC,gCAAlC,EAAiF,6BAAjF,EAA0H,0BAA1H,EAA4J,sBAA5J,EAAgM,4BAAhM,EAA0O,4BAA1O,EAAmR,2BAAnR,EAAsT,sB,4ICmBtT,MA2EA,GA3EuBA,EAAAA,EAAAA,KAAS,KAC9B,MAAM,mBAAEC,IAAuBC,EAAAA,EAAAA,MACzB,eAAEC,IAAmBC,EAAAA,EAAAA,MACrBC,GAAWC,EAAAA,EAAAA,OAEVC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,CAAC,IACjCC,EAAOC,IAAYF,EAAAA,EAAAA,WAAU,IAC7BG,EAAeC,IAAoBJ,EAAAA,EAAAA,UAAS,IAuCnD,OAZAK,EAAAA,EAAAA,YAAU,KACJb,GACFO,GAAWO,EAAAA,EAAAA,IAAKZ,EAAea,WAAWf,IAC5C,GACC,CAACA,KAEJa,EAAAA,EAAAA,YAAU,KACJb,GA/BqBgB,WACzB,MAAMC,GAAUC,EAAAA,EAAAA,IAAIC,EAAAA,EAAQ,qCAADC,OAAuCpB,KAClEqB,EAAAA,EAAAA,IAAQJ,GACLK,MAAKC,IACJA,EAAIC,SAASC,SAAQC,QAIrBH,EAAII,MAAMF,SAAQG,KAEhBC,EAAAA,EAAAA,KAAeX,EAAAA,EAAAA,IAAIC,EAAAA,EAASS,EAAQE,UAAUC,QAC3CT,MAAKU,IACJpB,GAAiBqB,GAAQ,IAAIA,EAAM,CAAEC,IAAKF,KAAO,IAElDG,OAAMC,IACL,MAAM,IAAIC,MAAMD,EAAM,GACtB,GACJ,IAEHD,OAAMC,IACL,MAAM,IAAIC,MAAMD,EAAM,GACtB,EAWFE,EACF,GACC,KAGDC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAuBC,SAAA,EACrCH,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAiBC,SAAA,EAC/BH,EAAAA,EAAAA,MAAA,MAAIC,UAAWC,EAAqBE,QAASA,IAAMvC,EAAS,cAAcsC,SAAA,CAAC,aAC9DpC,EAAQsC,SAErBC,EAAAA,EAAAA,KAAA,MAAIL,UAAWC,EAAaC,SAAS,OAAPpC,QAAO,IAAPA,OAAO,EAAPA,EAASwC,eACvCD,EAAAA,EAAAA,KAAA,KAAGL,UAAWC,EAAmBC,SAAS,OAAPpC,QAAO,IAAPA,OAAO,EAAPA,EAASyC,SAC5CF,EAAAA,EAAAA,KAAA,MAAIL,UAAWC,EAAmBC,SAC/B/B,EAAcqC,OAAS,GACtBrC,EAAcsC,KAAI,CAACC,EAAMzC,KACvBoC,EAAAA,EAAAA,KAAA,MAAIL,UAAWC,EAAkCE,QAASA,IAAMjC,EAASD,GAAOiC,UAC9EG,EAAAA,EAAAA,KAAA,OAAKL,UAAWC,EAAcP,IAAKgB,EAAKhB,IAAKiB,IAAK7C,EAAQwC,YAAc,YADnCM,EAAAA,EAAAA,cAO/CP,EAAAA,EAAAA,KAACQ,EAAAA,GAAQ,CACP5C,MAAOA,EACP6C,KAAM7C,GAAS,EACf8C,MAAOA,IAAM7C,GAAU,GACvB8C,OAAQ,IAAI7C,GACZ8C,QAAS,CAACC,EAAAA,EAAUC,EAAAA,EAAYC,EAAAA,EAAWC,EAAAA,EAAOC,EAAAA,OAEhD,G","sources":["webpack://furniture/./src/Pages/ProductDetails/styles.module.scss?9268","Pages/ProductDetails/ProductDetails.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"product_details\":\"styles_product_details__ndcjH\",\"product_path\":\"styles_product_path__5wu2y\",\"container\":\"styles_container__k1pKH\",\"title\":\"styles_title__ihLa4\",\"discription\":\"styles_discription__bRmc5\",\"images_list\":\"styles_images_list__MKFl4\",\"image_item\":\"styles_image_item__Gl2BL\",\"image\":\"styles_image__b8XQk\"};","import React, { useEffect, useState } from 'react'\r\nimport styles from './styles.module.scss'\r\n\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../storeMobx';\r\nimport { toJS } from 'mobx';\r\n\r\nimport { ref, getDownloadURL, listAll } from 'firebase/storage';\r\nimport { storage } from '../../Firabase/firabase';\r\n\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport Lightbox from 'yet-another-react-lightbox';\r\nimport Captions from 'yet-another-react-lightbox/plugins/captions';\r\nimport Fullscreen from 'yet-another-react-lightbox/plugins/fullscreen';\r\nimport Slideshow from 'yet-another-react-lightbox/plugins/slideshow';\r\nimport Video from 'yet-another-react-lightbox/plugins/video';\r\nimport Zoom from 'yet-another-react-lightbox/plugins/zoom';\r\n\r\nconst ProductDetails = observer(() => {\r\n  const { productDetailsName } = useParams();\r\n  const { PartfolioStore } = useStore();\r\n  const navigate = useNavigate();\r\n\r\n  const [product, setProduct] = useState({});\r\n  const [index, setIndex] = useState(-1);\r\n  const [storageImages, setStorageImages] = useState([]);\r\n\r\n\r\n  const getFirestoreImages = async () => {\r\n    const listRef = ref(storage, `gs://vitaly-furniture.appspot.com/${productDetailsName}`);\r\n    listAll(listRef)\r\n      .then(res => {\r\n        res.prefixes.forEach(folderRef => {\r\n          // All the prefixes under listRef.\r\n          // You may call listAll() recursively on them.\r\n        });\r\n        res.items.forEach(itemRef => {\r\n          // All the items under listRef.\r\n          getDownloadURL(ref(storage, itemRef._location.path_))\r\n            .then(url => {\r\n              setStorageImages(prev => [...prev, { src: url }]);\r\n            })\r\n            .catch(error => {\r\n              throw new Error(error);\r\n            });\r\n        });\r\n      })\r\n      .catch(error => {\r\n        throw new Error(error);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (productDetailsName) {\r\n      setProduct(toJS(PartfolioStore.getProduct(productDetailsName)));\r\n    }\r\n  }, [productDetailsName]);\r\n\r\n  useEffect(() => {\r\n    if (productDetailsName) {\r\n      getFirestoreImages();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.product_details}>\r\n      <div className={styles.container}>\r\n        <h2 className={styles.product_path} onClick={() => navigate('/portfolio')}>\r\n          Portfolio-{product.path}\r\n        </h2>\r\n        <h2 className={styles.title}>{product?.productName}</h2>\r\n        <p className={styles.discription}>{product?.title}</p>\r\n        <ul className={styles.images_list}>\r\n          {storageImages.length > 0 &&\r\n            storageImages.map((item, index) => (\r\n              <li className={styles.image_item} key={uuidv4()} onClick={() => setIndex(index)}>\r\n                <img className={styles.image} src={item.src} alt={product.productName + 'image'} />\r\n              </li>\r\n            ))}\r\n        </ul>\r\n      </div>\r\n\r\n      <Lightbox\r\n        index={index}\r\n        open={index >= 0}\r\n        close={() => setIndex(-1)}\r\n        slides={[...storageImages]}\r\n        plugins={[Captions, Fullscreen, Slideshow, Video, Zoom]}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default ProductDetails;"],"names":["observer","productDetailsName","useParams","PartfolioStore","useStore","navigate","useNavigate","product","setProduct","useState","index","setIndex","storageImages","setStorageImages","useEffect","toJS","getProduct","async","listRef","ref","storage","concat","listAll","then","res","prefixes","forEach","folderRef","items","itemRef","getDownloadURL","_location","path_","url","prev","src","catch","error","Error","getFirestoreImages","_jsxs","className","styles","children","onClick","path","_jsx","productName","title","length","map","item","alt","uuidv4","Lightbox","open","close","slides","plugins","Captions","Fullscreen","Slideshow","Video","Zoom"],"sourceRoot":""}